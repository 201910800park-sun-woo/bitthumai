이 시스템은 비트코인 자동 트레이딩을 위해 AI를 활용하며, 다음 4단계에 걸쳐 작동합니다.

1. 데이터 수집 📊
먼저, AI의 판단에 필요한 다양한 데이터를 수집합니다.

차트 데이터: 단기(1시간), 중기(4시간), 장기(일봉) 등 여러 시간대의 비트코인 차트 데이터를 빗썸 API에서 가져와 시장의 기술적 추세를 분석합니다.

뉴스 데이터: SerpAPI를 통해 최신 비트코인 관련 뉴스 기사를 수집하여 시장의 전반적인 분위기와 심리적 요인을 파악합니다.

잔고 및 거래 내역: 현재 보유하고 있는 원화(KRW)와 비트코인(BTC) 잔고, 그리고 SQLite 데이터베이스에 저장된 과거 5개 거래의 이력을 불러옵니다. 이 내역은 AI가 자신의 과거 결정을 되돌아보고 학습하는 데 사용됩니다.

2. AI의 판단 🧠
수집된 모든 데이터를 하나의 JSON 객체로 묶어 OpenAI의 GPT-4o 모델로 전송합니다.

AI는 system 역할 지시를 통해 "절대 돈을 잃지 않는다"는 원칙을 따르는 투자 전문가 역할을 부여받습니다.

AI는 차트의 기술적 지표, 뉴스의 긍정/부정적 심리, 그리고 과거 거래의 성공 여부를 종합적으로 분석합니다.

이후, 매수(buy), 매도(sell), 또는 보유(hold) 중 하나의 결정을 내리고, 매수/매도 시에는 사용할 자금의 비율(percentage, 1~100)을 함께 결정합니다. 모든 판단에는 그 이유가 담긴 **reason**이 포함됩니다.

3. 거래 실행 🚀
AI의 판단에 따라 실제 빗썸 거래소에서 시장가 주문을 실행합니다.

매수 시: AI가 결정한 비율만큼의 원화 잔고를 사용해 비트코인을 매수합니다.

매도 시: AI가 결정한 비율만큼의 비트코인 잔고를 사용해 매도합니다.

보유 시: 아무런 거래도 하지 않고 현재 포지션을 유지합니다.

모든 거래는 최소 주문 금액인 5,000 KRW 이상일 때만 실행됩니다.

4. 기록 및 스케줄링 📝
거래가 완료된 후, AI의 결정과 그 시점의 잔고, 가격 등 모든 정보를 SQLite 데이터베이스에 기록합니다.

이 기록은 다음 번 AI가 판단할 때 중요한 학습 자료로 재활용됩니다.

이 시스템은 무한 루프가 아닌, schedule 라이브러리를 통해 매일 09:00, 15:00, 21:00에 정해진 시간에만 실행되도록 자동화되어 있습니다. 이를 통해 불필요한 API 호출을 최소화하고 자원을 효율적으로 관리합니다.
